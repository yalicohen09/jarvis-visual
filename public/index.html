<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Jarvis Face</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <style>
    body { 
      background: black; 
      display: flex; 
      flex-direction: column;
      justify-content: center; 
      align-items: center; 
      height: 100vh; 
      margin: 0;
    }
    img { 
      width: 1200px; 
      max-width: 90vw;
      max-height: 90vh;
      transition: 0.3s; 
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
    .blinking {
      animation: blink 1s infinite;
    }
    .clock {
      color: cyan;
      font-size: 36px;
      font-family: 'Orbitron', sans-serif;
      margin-top: 20px;
      text-shadow: 0 0 10px cyan;
    }
  </style>
  <link rel="stylesheet" href="wave.css">
</head>
<body>

  <!-- ×”×ª×ž×•× ×” ×©×œ ×”×¤× ×™× -->
  <img id="jarvis-face" 
       src="https://cdn.glitch.global/e2b1c048-c542-433a-a1b0-8c21b6c18e4c/closed.png?v=1745307044849" 
       alt="Jarvis Face"/>

  <!-- ×”×©×¢×•×Ÿ -->
  <div id="clock" class="clock"></div>

  <!-- ×’×œ×™ ×§×•×œ -->
  <div id="wave" class="hidden">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>

  <script>
    const ws = new WebSocket('wss://jarvis-visual.onrender.com'); // ×›×ª×•×‘×ª ×”-Render ×©×œ×š
    const face = document.getElementById('jarvis-face');
    const wave = document.getElementById('wave');

    ws.onmessage = (event) => {
      console.log('ðŸ“© Message:', event.data);
      if (event.data === 'start_talking') {
        face.classList.add('blinking');
        face.src = 'https://cdn.glitch.global/e2b1c048-c542-433a-a1b0-8c21b6c18e4c/open.png?v=1745306016613';
        wave.classList.remove('hidden');
      } else if (event.data === 'stop_talking') {
        face.classList.remove('blinking');
        face.src = 'https://cdn.glitch.global/e2b1c048-c542-433a-a1b0-8c21b6c18e4c/closed.png?v=1745307044849';
        wave.classList.add('hidden');
      }
    };

    function updateClock() {
      const now = new Date();
      const israelTime = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Jerusalem" }));
      const hours = israelTime.getHours().toString().padStart(2, '0');
      const minutes = israelTime.getMinutes().toString().padStart(2, '0');
      const seconds = israelTime.getSeconds().toString().padStart(2, '0');
      document.getElementById('clock').innerText = `${hours}:${minutes}:${seconds}`;
    }
    setInterval(updateClock, 1000);
    updateClock();
  </script>

</body>
</html>
